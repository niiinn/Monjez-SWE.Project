<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monjez</title>
	<style>
    * { 
    box-sizing: border-box; 
    margin: 0; 
    padding: 0; 
}


header select {
    margin-right: auto; /* Push the home icon to the far right */
}


.theme-menu {
    display: none; /* Hidden by default */
    Position:absolute;
    background: white;
    border: 1px solid #ddd;
    border-radius: 5px;
    box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);
    z-index: 2000;

}

.theme-option {
    width: 50px; /* Adjust size as needed */
    height: auto;
    cursor: pointer;
    margin: 5px;
	
}

.theme-option:hover {
    transform: scale(1.1);
}


/* Default Theme */
body.default {
    background: #FFFCF2;
    color: black;
}
header.default, footer.default {
    background: #fceab6;
    color: white;
}

/* Default Theme */
.sidebar.default {
    background: #fceab6; 
    border-right: 1px solid #f6b484; 
}

/* purple Theme */
body.purple{
    background: #FFDFEF;
    color: #69247C;
}
header.purple, footer.purple {
    background: #A888B5;
    color: #69247C;
	border-color: #69247C;
}


.task-bar.purple, .high-priority-tasks.purple{
 background: #EABDE6;//needs to be slightly darker
    color: #69247C;
	border-color: #69247C;
}

.add.purple{
background: #AA60C8;//needs to be darker
    color: #69247C;
}

/* purple Theme */
.sidebar.purple {
    background: #A888B5; 
    border-right: 1px solid #69247C; 
}



/* Blue Theme */
body.blue{
    background: #e0f7fa;
    color: #006064;
}
header.blue, footer.blue {
    background: #b2ebf2;
    color: #006064;
	border-color: #006064;
}

.task-bar.blue,.high-priority-tasks.blue{
 background: #66d7e5;//needs to be slightly darker
    color: #006064;
	border-color: #006064;
}

.add.blue{
background: #21b2c4;//needs to be darker
    color: #006064;
}


/* Blue Theme */
.sidebar.blue {
    background: #b2ebf2; 
    border-right: 1px solid #006064; 
}

/* Green Theme */
body.green{
    background: #e8f5e9;
    color: #1b5e20;
}

header.green, footer.green{
    background: #c8e6c9;
    color: #1b5e20;
	border-color: #1b5e20;
}

.task-bar.green, .high-priority-tasks.green{
 background: #a7d7a9;//needs to be slightly darker
    color: #1b5e20;
	border-color: #1b5e20;
}

.add.green{
background: #84c787;//needs to be darker
    color: #1b5e20;
}



/* Green Theme */
.sidebar.green {
    background: #c8e6c9; 
    border-right: 1px solid #1b5e20; 
}



body { 
    font-family: Arial, sans-serif; 
    display: flex; 
    flex-direction: column; 
    min-height: 100vh; 
    background-color: #FFFCF2;
    color: #333; 
}
header { 
    margin-bottom: 20px; /* Increase space below the header */
    background: #fceab6; 
    color: white; 
    padding: 15px; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-bottom: 2px solid #f6b484;
    width: 100%; 
    position: sticky; 
    top: 0; 
    left: 0; 
    height: 70px; 
    z-index: 1000; 
}

footer { 
    
    background: #fceab6; 
    color: white; 
    text-align: center; 
    padding: 15px; 
     
    bottom: 0; 
    width: 100%; 
    height: 60px; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    border-top: 2px solid #f6b484;
	z-index:1;
}

.container { 
    display: flex; 
    flex: 1; 
    margin-top: 20px; /* Increase space below the header */
    padding-bottom: 20px; /* Space above the footer */
    justify-content: center; 
}

.sidebar {
    position: fixed;
    left: 0;
    top: 70px;
    bottom: 60px; /* Ÿäÿ¨ÿπŸÑ ÿ∑ŸàŸÑŸáÿß ŸäÿµŸÑ ŸÑŸÑŸÅŸàÿ™ÿ± */
    width: 280px;
    background: #fceab6;
    padding: 20px;
    display: flex;
    flex-direction: column;
    border-right: 1px solid #f6b484;
    border-radius: 0 20px 20px 0;
}


.content { 
    flex: 1; 
    padding: 20px; 
    margin-left: 300px; 
    text-align: center; 
    max-width: 800px; 
    padding-bottom: 100px; 
    margin-top: 20px; /* Increase space between content and sidebar */
}
.search-box { 
    flex: 1; 
    display: flex; 
    justify-content: center; 
}
.search-box input { 
    width: 250px; 
    padding: 10px; 
    border: 1px solid #f6b484; 
    border-radius: 25px; 
    text-align: center; 
    font-size: 16px; 
}
.container { 
    display: flex; 
    flex: 1; 
    margin-top: 60px; 
    padding-bottom: 100px; 
    justify-content: center; 
}


.sidebar a { 
    text-decoration: none; 
    color: #333; 
    padding: 15px; 
    background: white; 
    margin-bottom: 10px; 
    text-align: left; 
    border-radius: 25px; 
    transition: background 0.3s; 
    display: flex; 
    align-items: center; 
    gap: 10px; 
}
.sidebar a:hover { 
    background: #fac2b7; 
}
.logout {
    position: absolute; /* üî• Ÿäÿ´ÿ®ÿ™ ÿßŸÑÿ≤ÿ± ÿØÿßÿÆŸÑ sidebar */
    bottom: 20px; /* üìå Ÿäÿ¨ÿπŸÑŸá ŸÖŸÑÿßÿµŸÇŸãÿß ŸÑŸÑŸÅŸàÿ™ÿ± */
    left: 50%;
    transform: translateX(-50%);
    padding: 12px;
    text-align: center;
    background: #f48e82;
    color: white;
    border-radius: 25px;
    transition: all 0.3s ease-in-out;
    width: 80%;
    text-decoration: none;
    font-weight: bold;
}

.logout:hover {
    background: #e07a7a;
}


.task-list { 
    width: 100%; 
    background: white; 
    padding: 20px; 
    border-radius: 15px; 
    box-shadow: 0px 0px 15px rgba(0, 0, 0, 0.1); 
}
.task-list ul { 
    list-style: none; 
    padding: 0; 
}
.task-list li { 
    padding: 15px; 
    border: 1px solid #ddd; 
    display: flex; 
    justify-content: space-between; 
    align-items: center; 
    border-radius: 10px; 
}
input[type='checkbox']{
accent-color:#f9b5a8;
}
.task-bar { 
   
    bottom: 60px; 
    right: 100px; /* Position the task bar to the right */
    width: 100%; /* Set a specific width for the task bar */
    background: #fac2b7; 
    padding: 10px; 
   	text-align:right;
    display: none; 
    border-top: 2px solid #f6b484; 
}
.task-bar input, 
.task-bar select, 
.task-bar button { 
    padding: 8px; 
    margin: 5px; 
	margin-left:20px;

    border-radius: 25px; 
    border: 1px solid #ddd; 
    font-size: 14px; 
}
.task-bar button { 
    background: #f8a696; 
    color: white; 
    font-weight: bold; 
    cursor: pointer; 
	margin-right:200px;
}


.profile-container { 
    display: flex; 
    align-items: center; 
    gap: 10px; 
    padding: 15px; 
    background: white; 
    border-radius: 15px; 
    margin-bottom: 10px; 
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); 
}
.profile-container img { 
    width: 45px; 
    height: 45px; 
    border-radius: 50%; 
    object-fit: cover; 
    border: 2px solid #f6b484; 
}
.profile-container span { 
    font-size: 16px; 
    font-weight: bold; 
    color: #333; 
}
.completed-task { 
    background: #e0e0e0; 
    text-decoration: line-through; 
    text-decoration-thickness: 2px; 
    text-decoration-color: #333; 
    opacity: 0.7; 
    padding: 15px; 
    border-radius: 10px; 
}
.high-priority-tasks { 
    background: #fac2b7; 
    padding: 15px; 
    border-radius: 15px; 
    box-shadow: 0px 2px 5px rgba(0, 0, 0, 0.1); 
    margin: 20px auto; 
    width: 90%; 
    max-width: 600px; 
    text-align: center; 
}
.high-priority-tasks h2 { 
    font-size: 18px; 
    color: white; 
    margin-bottom: 10px; 
}
.high-priority-tasks ul { 
    list-style: none; 
    padding: 0; 
}
.high-priority-tasks li { 
    background: white; 
    padding: 10px; 
    margin-bottom: 5px; 
    border-radius: 10px; 
    border-left: 5px solid #D9534F; 
    display: flex; 
    justify-content: space-between; 
}
.logo { 
    height: 70px; 
    width: auto; 
	margin-right:49px;
}
.home-logo { 
    height: 40px; 
    width: auto; 
    border-radius: 5px; 
}
.task-content-wrapper { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    width: 100%; 
}
.task-details { 
    display: flex; 
    flex-direction: column; 
    gap: 3px; 
    flex-grow: 1; 
}
.task-actions { 
    display: flex; 
    flex-direction: column; 
    gap: 5px; 
}
.task-actions button { 
    padding: 6px; 
    font-size: 14px; 
    border: none; 
    cursor: pointer; 
    border-radius: 25px; 
    transition: background 0.3s; 
}
.task-actions button:first-child { 
    background: #f6b484; 
    color: white; 
}
.task-actions button:first-child:hover { 
    background: #e07a7a; 
}
.task-actions button:last-child { 
    background: #d9534f; 
    color: white; 
}
.task-actions button:last-child:hover { 
    background: #c9302c; 
}
.search-results-container { 
    display: none; 
    position: fixed; 
    top: 40%; 
    left: 55%; 
    transform: translate(-50%, -50%); 
    padding: 25px; 
    background: white; 
    border-radius: 15px; 
    box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2); 
    width: 450px; 
    max-width: 85%; 
    text-align: center; 
    z-index: 1000; 
    animation: fadeIn 0.3s ease-in-out; 
	
}
.search-results-container h2 { 
    font-size: 24px; 
    margin-bottom: 12px; 
    color: #333; 
    font-weight: bold; 
}
.search-results-container ul { 
    list-style: none; 
    padding: 0; 
    max-height: 200px; 
    overflow-y: auto; 
    font-size: 16px; 
}
.search-results-container li { 
    padding: 12px; 
    border-bottom: 1px solid #ddd; 
    cursor: pointer; 
    transition: background 0.3s ease-in-out; 
}
.search-results-container li:hover { 
    background: #f6b484; 
}
.no-results { 
    font-size: 18px; 
    color: red; 
    font-weight: bold; 
    display: block; 
    margin-top: 12px; 
}
.back-to-tasks { 
    background: #f6b484; 
    color: white; 
    padding: 12px 18px; 
    border: none; 
    border-radius: 25px; 
    cursor: pointer; 
    font-size: 16px; 
    margin-top: 15px; 
    transition: all 0.3s ease-in-out; 
}
.back-to-tasks:hover { 
    background: #e07a7a; 
}
@keyframes fadeIn { 
    from { 
        opacity: 0; 
        transform: translate(-50%, -55%); 
    } 
    to { 
        opacity: 1; 
        transform: translate(-50%, -50%); 
    } 
}
.progress-container { 
    background: #e0e0e0; 
    border-radius: 10px; 
    height: 20px; 
    margin: 20px 0; 
    width: 100%; 
    display: flex; 
    align-items: center; 
    position: relative; 
	
}
.progress-bar { 
    background:#C0C0C0; 
    height: 100%; 
    border-radius: 10px; 
    transition: width 0.3s; 
}
.circle { 
    width: 50px; 
    height: 50px; 
    border-radius: 50%; 
    background: #C0C0C0; 
    color: white; 
    display: flex; 
    align-items: center; 
    justify-content: center; 
    font-size: 18px; 
    font-weight: bold; 
    box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2); 
    left: 50%; 
}
</style>
</head>
<body>
    
    
        <header class="default">
    <img src="images/logo.png" alt="Logo" class="logo">
    <img src="images/theme.png" alt="Theme" id="themeIcon" onclick="toggleThemeMenu()" style="cursor: pointer;" height='50;' weight='50;'>
    <div id="themeMenu" class="theme-menu">
        <img src="images/default.png" alt="Default" onclick="changeTheme('default')" class="theme-option">
        <img src="images/purple.png" alt="Purple" onclick="changeTheme('purple')" class="theme-option">
        <img src="images/blue.png" alt="Blue" onclick="changeTheme('blue')" class="theme-option">
        <img src="images/green.png" alt="Green" onclick="changeTheme('green')" class="theme-option">
    </div>
    

        
        
        
        
   <div class="search-box">
    <input type="text" id="searchTask" placeholder="Search..." onfocus="showSearchResults()" oninput="filterTasks()">
</div>

<!-- ÿµŸÅÿ≠ÿ© ÿßŸÑÿ®ÿ≠ÿ´ ÿßŸÑÿ™Ÿä ÿ™ÿ≥ÿ™ÿ®ÿØŸÑ ÿßŸÑŸÖŸáÿßŸÖ -->
<div id="searchResultsContainer" class="search-results-container" style="display: none;"> <!-- üî¥ ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿµŸÅÿ≠ÿ© -->
    <h2>Search Results</h2>
    <ul id="searchResultsList"></ul>
    <p id="noResultsText" class="no-results" style="display: none;">No matching tasks found!</p> <!-- üî¥ ÿ•ÿÆŸÅÿßÿ° no results -->
    <button class="back-to-tasks" onclick="showTasks()">Back to Tasks</button>
</div>








       <a href="index.html" class="home-link">
    <img src="images/HP.png" alt="Home" class="home-logo">
	
</a>

    </header>
    
    

  

    
    <div class="container">
    <div class="sidebar">
        <div class="profile-container">
            <img src="images/pro.png" alt="Profile Picture">
            <span id="userGreeting">Hello, Guest</span>
        </div>
        <div>
            <a href="#" onclick="showTasks(event)">‚òÄÔ∏èMy Tasks</a>
            <a href="ShoppingList.html">üõçÔ∏è Shopping List</a>
			<a href="#" class="logout" onclick="logout()">üîì Logout</a>
        </div>
       
    </div>
    <div class="content" id="content">
        <div class="high-priority-tasks">
            <h2>üöÄ High Priority Tasks</h2>
            <ul id="highPriorityList"></ul>
        </div>
    </div>
</div>

<div class="task-bar" id="taskBar" style="display: none;">
    <input type="text" id="taskInput" placeholder="Enter task" required>
    <select id="priority" required>
        <option value="" disabled selected>Priority</option>
        <option value="high">High</option>
        <option value="medium">Medium</option>
        <option value="low">Low</option>
    </select>
	
	
    <input type="date" id="dueDate">
    <button class='add' onclick="addTask()">+ Add a Task</button>  <!-- Add Task Button -->
</div>

    <footer>
        &copy; 2025 MONJEZ
    </footer>
    <script>


function addTask() {
    const taskInput = document.getElementById("taskInput");
    const priority = document.getElementById("priority");
    const dueDate = document.getElementById("dueDate");

    if (!taskInput.value || !priority.value) {
        alert("Task content and priority are required!");
        return;
    }

    const task = {
        content: taskInput.value,
        priority: priority.value,
        dueDate: dueDate.value || 'No Date',
        completed: false
    };

    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    tasks.push(task);

    // ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ£ŸÜ ÿßŸÑÿ®ŸäÿßŸÜÿßÿ™ Ÿäÿ™ŸÖ ÿ™ÿÆÿ≤ŸäŸÜŸáÿß ÿ®ÿ¥ŸÉŸÑ ÿµÿ≠Ÿäÿ≠
    console.log("Tasks after adding: ", tasks);
    localStorage.setItem("tasks", JSON.stringify(tasks));

    renderTasks(); 
    loadHighPriorityTasks();

    taskInput.value = "";
    priority.selectedIndex = 0;
    dueDate.value = "";
}


function markAsComplete(index) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    tasks[index].completed = !tasks[index].completed; // ŸÇŸÑÿ® ÿ≠ÿßŸÑÿ© ÿßŸÑŸÖŸáŸÖÿ© ÿ®ŸäŸÜ completed Ÿà incomplete
    localStorage.setItem("tasks", JSON.stringify(tasks));

    renderTasks();
    loadHighPriorityTasks(); // ‚úÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáÿßŸÖ ÿ∞ÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸàŸäÿ© ÿßŸÑÿπÿßŸÑŸäÿ©
}
function editTask(index) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    const taskItem = document.querySelectorAll("#taskList li, #completedList li")[index];

    if (!taskItem) return;

    // ÿ•ŸÜÿ¥ÿßÿ° ŸÜŸÖŸàÿ∞ÿ¨ ÿßŸÑÿ™ÿ≠ÿ±Ÿäÿ± ÿØÿßÿÆŸÑ ÿßŸÑÿπŸÜÿµÿ±
    taskItem.innerHTML = `
        <input type='text' class='edit-content' value='${tasks[index].content}'>
        <select class='edit-priority'>
            <option value="high" ${tasks[index].priority === "high" ? "selected" : ""}>High</option>
            <option value="medium" ${tasks[index].priority === "medium" ? "selected" : ""}>Medium</option>
            <option value="low" ${tasks[index].priority === "low" ? "selected" : ""}>Low</option>
        </select>
        <input type='date' class='edit-date' value='${tasks[index].dueDate !== 'No Date' ? tasks[index].dueDate : ''}'>
        <button onclick='saveTask(${index})'>üíæ</button>
        <button onclick='renderTasks()'>‚ùå</button>
    `;
}

function saveTask(index) {
    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    const taskItem = document.querySelectorAll("#taskList li, #completedList li")[index];

    if (!taskItem) return;

    // ÿßÿ≥ÿ™ÿÆÿ±ÿßÿ¨ ÿßŸÑŸÇŸäŸÖ ÿ®ÿπÿØ ÿßŸÑÿ™ÿπÿØŸäŸÑ
    const content = taskItem.querySelector(".edit-content").value.trim();
    const priority = taskItem.querySelector(".edit-priority").value;
    const dueDate = taskItem.querySelector(".edit-date").value || 'No Date';

    if (content === "") {
        alert("Task content cannot be empty!");
        renderTasks();
        return;
    }

    // ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑŸÖŸáŸÖÿ© ŸÅŸä LocalStorage
    tasks[index] = { content, priority, dueDate, completed: tasks[index].completed };
    localStorage.setItem("tasks", JSON.stringify(tasks));

    renderTasks();
    loadHighPriorityTasks();
}

function sortTasks() {
    const priorityOrder = { "high": 1, "medium": 2, "low": 3 };

    // ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÖŸáÿßŸÖ ÿØÿßÿÆŸÑ "taskList" Ÿà "completedList" ÿ≠ÿ≥ÿ® ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©
    ["taskList", "completedList"].forEach(listId => {
        const list = document.getElementById(listId);
        Array.from(list.children)
            .sort((a, b) => {
                // ÿ™ÿ±ÿ™Ÿäÿ® ÿßŸÑŸÖŸáÿßŸÖ ÿ®ŸÜÿßÿ°Ÿã ÿπŸÑŸâ ÿßŸÑÿ£ŸàŸÑŸàŸäÿ©
                const priorityA = a.getAttribute("data-priority");
                const priorityB = b.getAttribute("data-priority");
                return priorityOrder[priorityA] - priorityOrder[priorityB];
            })
            .forEach(task => list.appendChild(task));  // ÿ•ÿπÿßÿØÿ© ÿ•ÿ∂ÿßŸÅÿ© ÿßŸÑÿπŸÜÿßÿµÿ± ŸÖÿ±ÿ™ÿ®ÿ©
    });
}

function loadHighPriorityTasks() {
    const highPriorityList = document.getElementById("highPriorityList");
    if (!highPriorityList) return; // ÿ™ÿ¨ŸÜÿ® ÿßŸÑÿ£ÿÆÿ∑ÿßÿ° ÿ•ÿ∞ÿß ŸÑŸÖ ŸäŸÉŸÜ ÿßŸÑÿπŸÜÿµÿ± ŸÖŸàÿ¨ŸàÿØŸãÿß

    highPriorityList.innerHTML = ""; // ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸÇÿ®ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´

    // ÿ¨ŸÑÿ® ÿßŸÑŸÖŸáÿßŸÖ ŸÖŸÜ Local Storage
    const tasks = JSON.parse(localStorage.getItem("tasks")) || [];

    // ÿ™ÿµŸÅŸäÿ© ÿßŸÑŸÖŸáÿßŸÖ ÿ∞ÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸàŸäÿ© ÿßŸÑÿπÿßŸÑŸäÿ© ŸàÿßŸÑÿ™Ÿä ŸÑŸÖ ÿ™ŸèŸÜÿ¨ÿ≤
    const highPriorityTasks = tasks.filter(task => task.priority === "high" && !task.completed);

    if (highPriorityTasks.length === 0) {
        highPriorityList.innerHTML = `<p> </p>`; // ÿ±ÿ≥ÿßŸÑÿ© ŸÅŸä ÿ≠ÿßŸÑ ÿπÿØŸÖ Ÿàÿ¨ŸàÿØ ŸÖŸáÿßŸÖ
    } else {
        highPriorityTasks.forEach(task => {
            const li = document.createElement("li");
            li.innerHTML = `<span>${task.content} - ${task.dueDate}</span>`;
            highPriorityList.appendChild(li);
        });
    }
}





function renderTasks() {
    const taskList = document.getElementById("taskList");
    const completedList = document.getElementById("completedList");
    const progressBar = document.getElementById("progressBar");
    const progressText = document.getElementById("progressText");
    const taskCircle = document.getElementById("taskCircle");

    if (!taskList || !completedList) return;

    taskList.innerHTML = "";
    completedList.innerHTML = "";

    let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    const totalTasks = tasks.length;
    let completedTasks = 0;

    tasks.forEach((task, index) => {
        const taskItem = document.createElement("li");
        taskItem.setAttribute("data-priority", task.priority);
        taskItem.innerHTML = `
            <input type='checkbox' onclick='markAsComplete(${index})' ${task.completed ? "checked" : ""}> 
            <span class="task-content">${task.content}</span> 
            - <span class="priority">${task.priority.toUpperCase()}</span> 
            - <span class="due-date">${task.dueDate}</span> 
            <button onclick='editTask(${index})'>‚úèÔ∏è</button>
            <button onclick='deleteTask(${index})'>üóëÔ∏è</button>
        `;

        if (task.completed) {
            taskItem.classList.add("completed-task");
            completedList.appendChild(taskItem);
            completedTasks++;
        } else {
            taskList.appendChild(taskItem);
        }
    });

    sortTasks();
    loadHighPriorityTasks();

    // Update progress bar
    const completionPercentage = totalTasks ? (completedTasks / totalTasks) * 100 : 0;
    progressBar.style.width = `${completionPercentage}%`;
    progressText.textContent = `${completedTasks}/${totalTasks} tasks completed`;
    
    // Update task circle
    taskCircle.textContent = `${completedTasks}/${totalTasks}`;
}



function deleteTask(index) {
    if (confirm("Are you sure you want to delete this task?")) {
        let tasks = JSON.parse(localStorage.getItem("tasks")) || [];
        tasks.splice(index, 1);
        localStorage.setItem("tasks", JSON.stringify(tasks));
        
        console.log("Task deleted! New tasks list:", tasks);
        renderTasks();
    }
}

function showTasks(event) {
    if (event) event.preventDefault(); // Prevent page reload
    document.getElementById('taskBar').style.display = 'block'; 
    document.getElementById("searchResultsContainer").style.display = "none"; // Hide search results

    const content = document.getElementById("content");
    content.innerHTML = ""; // Clear previous content

    const taskListContainer = document.createElement("div");
    taskListContainer.classList.add("task-list");

    taskListContainer.innerHTML = `
    <h2>My Tasks</h2>
    <div class="progress-container">
        <div class="progress-bar" id="progressBar" style="width: 0%;"></div>
        <div class="circle" id="taskCircle">0/0</div>
    </div>
    <p id="progressText" class="progress-text" style="display: none;">0/0 tasks completed</p>
    <ul id="taskList"></ul>
    <ul id="completedList"></ul>
`;

    content.appendChild(taskListContainer);
    renderTasks(); // Render tasks to show them
}

function filterTasks() {
    const query = document.getElementById("searchTask").value.toLowerCase().trim();
    const tasks = JSON.parse(localStorage.getItem("tasks")) || [];
    
    const searchResultsList = document.getElementById("searchResultsList");
    const noResultsText = document.getElementById("noResultsText");

    searchResultsList.innerHTML = ""; // ‚úÖ ÿ™ŸÅÿ±Ÿäÿ∫ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸÇÿ®ŸÑ ÿßŸÑÿ™ÿ≠ÿØŸäÿ´

    if (query === "") {
        document.getElementById("searchResultsContainer").style.display = "none"; // ‚úÖ ÿ•ÿÆŸÅÿßÿ° ÿßŸÑÿ®ÿ≠ÿ´ ÿπŸÜÿØ ÿ≠ÿ∞ŸÅ ÿßŸÑŸÜÿµ
        noResultsText.style.display = "none";  
        return;
    }

    let found = false;

    tasks.forEach(task => {
        if (task.content.toLowerCase().includes(query)) {
            found = true;
            const resultItem = document.createElement("li");
            resultItem.innerText = `${task.content} - ${task.priority.toUpperCase()} - ${task.dueDate}`;
            resultItem.onclick = () => {
                document.getElementById("searchTask").value = task.content;
                showTasks();
            };
            searchResultsList.appendChild(resultItem);
        }
    });

    if (found) {
        noResultsText.style.display = "none"; // ‚úÖ ÿ•ÿÆŸÅÿßÿ° "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ŸÜÿ™ÿßÿ¶ÿ¨" ÿπŸÜÿØ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿ™ÿ∑ÿßÿ®ŸÇ
    } else {
        noResultsText.style.display = "block"; // ‚úÖ ÿπÿ±ÿ∂ "No matching tasks found!" ÿπŸÜÿØ ÿπÿØŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÜÿ™ÿßÿ¶ÿ¨
    }

    document.getElementById("searchResultsContainer").style.display = "block"; // ‚úÖ ÿ•ÿ∏Ÿáÿßÿ± ÿßŸÑŸÜÿ™ÿßÿ¶ÿ¨
}

function showSearchResults() {
    const content = document.getElementById("content");
    content.innerHTML = ` 
        <div id="searchResultsContainer" class="search-results-container">
            <h2>Search Results</h2>
            <ul id="searchResultsList"></ul>
            <p id="noResultsText" class="no-results" style="display: none;">No matching tasks found!</p> 
            <button class="back-to-tasks" onclick="showTasks()">Back to Tasks</button>
        </div>
    `;
}





function logout() {
    localStorage.removeItem("loggedInUser");
    document.getElementById("userGreeting").textContent = "Hello, Guest"; // ‚úÖ ÿ™ÿ≠ÿØŸäÿ´ ÿßŸÑÿßÿ≥ŸÖ ŸÅŸàÿ±Ÿãÿß
    window.location.href = "login.html";
}

function loadUserName() {
    const userGreeting = document.getElementById("userGreeting");
    let username = localStorage.getItem("loggedInUser");

    if (username) {
        userGreeting.textContent = `Hello, ${username}`;
    } else {
        userGreeting.textContent = "Hello, Guest";
    }
}

// ‚úÖ ÿ™ÿ£ŸÉÿØ ŸÖŸÜ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑŸÖŸáÿßŸÖ ÿ∞ÿßÿ™ ÿßŸÑÿ£ŸàŸÑŸàŸäÿ© ÿπŸÜÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿµŸÅÿ≠ÿ©
document.addEventListener("DOMContentLoaded", function () {
    loadUserName();
    renderTasks();
    loadHighPriorityTasks(); // ÿ•ÿµŸÑÿßÿ≠ ÿßŸÑÿπÿ±ÿ∂ ÿπŸÜÿØ ÿ™ÿ≠ŸÖŸäŸÑ ÿßŸÑÿµŸÅÿ≠ÿ©
});

    
//localStorage.clear();


function toggleThemeMenu() {
    const menu = document.getElementById('themeMenu');
    menu.style.display = menu.style.display === 'block' ? 'none' : 'block';
}

function changeTheme(theme) {
    // Remove all theme classes from body, header, footer, and sidebar
    document.body.classList.remove('default', 'purple', 'blue', 'green');
    document.body.classList.add(theme);
    
    const header = document.querySelector('header');
    const footer = document.querySelector('footer');
    const sidebar = document.querySelector('.sidebar');
	 const taskBar = document.querySelector('.task-bar'); 
	 const highPrio = document.querySelector('.high-priority-tasks');
	  
	
    
    header.classList.remove('default', 'purple', 'blue', 'green');
    header.classList.add(theme);
    
    footer.classList.remove('default', 'purple', 'blue', 'green');
    footer.classList.add(theme);
    
    sidebar.classList.remove('default', 'purple', 'blue', 'green');
    sidebar.classList.add(theme);
	
	

	
	 taskBar.className = 'task-bar ' + theme; // Set base class and theme class
	
	
	
	const addButtons = document.querySelectorAll('.add');
    addButtons.forEach(element => {
        element.classList.remove('default', 'purple', 'blue', 'green');
        element.classList.add(theme);
    });
	
	highPrio.classList.remove('default', 'purple', 'blue', 'green');
    highPrio.classList.add(theme);
	

    
    // Save the theme to localStorage
    localStorage.setItem('selectedTheme', theme);
    
    // Hide the theme menu after selecting a theme
    document.getElementById('themeMenu').style.display = 'none';
}

// Close the menu if clicked outside
window.onclick = function(event) {
    if (!event.target.matches('#themeIcon')) {
        const menu = document.getElementById('themeMenu');
        if (menu.style.display === 'block') {
            menu.style.display = 'none';
        }
    }
};

// On page load, apply the saved theme if it exists
window.onload = function() {
    const savedTheme = localStorage.getItem('selectedTheme');
    if (savedTheme) {
        changeTheme(savedTheme);
    }
};
</script>
	</body>
</html>
     
